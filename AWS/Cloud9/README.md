# Cloud9

## 環境

### 環境の新規作成（初回）

1. Cloud9環境を作成
   - Cloud9がEC2インスタンスにSSH接続する設定項目を選択
1. EC2インスタンスのセキュリティグループの設定を編集
1. `cloud9`という名前のキーペアを作成し、ローカルの`~/.ssh`下に配置
1. 作成したCloud9を開き、画面左側のディレクトリ一覧の右上にある歯車マーク（設定ボタン）を押し「Show Hidden Files」と「Show Home in Favorites」にチェックを入れ、`~/.ssh/authorized_keys`を開き、ローカルの`~/.ssh/cloud9.pub`に書いてある公開鍵をコピペ
1. ローカルの`~/.ssh/config`を編集
1. VSCodeからCloud9にSSH接続

### 環境の新規作成（2回目以降）

1. Cloud9環境を作成
   - Cloud9がEC2インスタンスにSSH接続する設定項目を選択
1. EC2インスタンスのセキュリティグループを既存のCloud9用のものに変更し、自動作成されたセキュリティグループは削除
1. 作成したCloud9を開き、画面左側のディレクトリ一覧の右上にある歯車マーク（設定ボタン）を押し「Show Hidden Files」と「Show Home in Favorites」にチェックを入れ、`~/.ssh/authorized_keys`を開き、ローカルの`~/.ssh/cloud9.pub`に書いてある公開鍵をコピペ
1. ローカルの`~/.ssh/config`のcloud9のIPアドレスを作成したEC2のものに変更
1. VSCodeからCloud9にSSH接続（途中、表示されるダイアログでは「続行」を押す」）

### 環境に再接続する

1. ローカルの`~/.ssh/config`のcloud9のIPアドレスを作成したEC2のものに変更
1. VSCodeからCloud9にSSH接続（途中、表示されるダイアログでは「続行」を押す」）

## インスタンスタイプの選び方

HTML・CSS・Markdownなどテキストの編集しかしない場合は4GiBメモリ、React等で開発用のサーバーを立ち上げたりするようなことをする場合は8GibメモリのEC2インスタンスを選択する。

基本的にT系とM系の2種類があるが、T系にはバースト機能がついており、M系はEBS帯域幅が優れている。開発環境においてはバースト機能は必要ないが、M系よりもT系の方が安いので、特に理由がなければT系、EBSとのデータのやりとりが多いようであればM系を選択する。

また基本的に番号が大きくなるほど安くなる（最新型の方がコストパフォーマンスが良くなるため）。

上記を踏まえて、Cloud9上で選択できるインスタンスの中から選ぶ。

8GiBの場合は`t3.large`か`m5.large`、2Gibの場合は`t3.small`を選択する。
